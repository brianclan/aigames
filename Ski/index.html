<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Ski Game</title>
    <script type="module" crossorigin>(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const x of l.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&f(x)}).observe(document,{childList:!0,subtree:!0});function c(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function f(o){if(o.ep)return;o.ep=!0;const l=c(o);fetch(o.href,l)}})();const e=document.getElementById("game-canvas"),i=e.getContext("2d"),E=document.getElementById("score"),p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);let h=0,v,a=!1,u=!1,y=0,d=2;const S=7,t={x:0,y:0,width:20,height:30,color:"red",speed:3,maxSpeed:8,acceleration:.01,direction:{x:0,y:-1},targetDirection:{x:0,y:-1},inertia:.05};let s=[];const F=[{width:30,height:30,color:"#5D4037"},{width:50,height:20,color:"#BBDEFB"},{width:80,height:15,color:"#FFFFFF"}];let m=[];function B(){m=[];for(let n=0;n<100;n++)m.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:Math.random()*2+1,speed:Math.random()*1+.5})}function T(){const n=document.getElementById("game-container");e.width=n.clientWidth,e.height=n.clientHeight,t.x=e.width/2-t.width/2,t.y=e.height-100,a&&!u?D():A()}window.addEventListener("resize",T);function P(){T(),B(),A()}let M=0;e.addEventListener("mousemove",n=>{const r=e.getBoundingClientRect();M=n.clientX-r.left,w(M),a||(a=!0,g())});e.addEventListener("touchstart",n=>{if(n.preventDefault(),a||(a=!0,g()),n.touches.length>0){const r=n.touches[0],c=e.getBoundingClientRect();y=r.clientX-c.left,w(y)}});e.addEventListener("touchmove",n=>{if(n.preventDefault(),n.touches.length>0){const r=n.touches[0],c=e.getBoundingClientRect(),f=r.clientX-c.left;w(f),y=f}});function w(n){const c=(n/e.width*2-1)*(Math.PI/2);t.targetDirection={x:Math.sin(c),y:-Math.cos(c)}}function O(){t.direction.x+=(t.targetDirection.x-t.direction.x)*t.inertia,t.direction.y+=(t.targetDirection.y-t.direction.y)*t.inertia;const n=Math.sqrt(t.direction.x*t.direction.x+t.direction.y*t.direction.y);n>0&&(t.direction.x/=n,t.direction.y/=n)}function A(){i.fillStyle="#E3F2FD",i.fillRect(0,0,e.width,e.height),i.fillStyle="#333",i.font="24px Arial",i.textAlign="center",p?(i.fillText("Tap to Start",e.width/2,e.height/2),i.font="16px Arial",i.fillText("Swipe left/right to control direction",e.width/2,e.height/2+30)):(i.fillText("Move mouse to start",e.width/2,e.height/2),i.font="16px Arial",i.fillText("Move mouse left/right to adjust direction",e.width/2,e.height/2+30),i.fillText("Speed increases over time with inertia effects",e.width/2,e.height/2+55))}function g(){u&&(h=0,s=[],d=2,t.x=e.width/2,t.speed=3,t.direction={x:0,y:-1},t.targetDirection={x:0,y:-1},u=!1,E.textContent="0"),L()}function b(){const n=F[Math.floor(Math.random()*F.length)],r={x:Math.random()*(e.width-n.width),y:-n.height,width:n.width,height:n.height,color:n.color};s.push(r)}function C(n,r){return n.x<r.x+r.width&&n.x+n.width>r.x&&n.y<r.y+r.height&&n.y+n.height>r.y}function D(){i.clearRect(0,0,e.width,e.height),i.fillStyle="#E3F2FD",i.fillRect(0,0,e.width,e.height),i.fillStyle="#FFFFFF",m.forEach(r=>{r.y+=r.speed+d,r.y>e.height&&(r.y=0,r.x=Math.random()*e.width),i.beginPath(),i.arc(r.x,r.y,r.radius,0,Math.PI*2),i.fill()});const n=Math.atan2(t.direction.x,-t.direction.y);i.save(),i.translate(t.x+t.width/2,t.y+t.height/2),i.rotate(n),i.fillStyle=t.color,i.beginPath(),i.moveTo(0,-30/2),i.lineTo(-20/2,t.height/2),i.lineTo(t.width/2,t.height/2),i.closePath(),i.fill(),i.fillStyle="black",i.fillRect(-20/2-5,t.height/2-3,t.width+10,3),i.restore(),p||(i.fillStyle="black",i.font="12px Arial",i.textAlign="left",i.fillText(`Speed: ${t.speed.toFixed(1)}`,10,20)),s.forEach(r=>{i.fillStyle=r.color,i.fillRect(r.x,r.y,r.width,r.height)})}function L(){O(),t.speed<t.maxSpeed&&(t.speed+=t.acceleration),d=2+(t.speed-3)*.8,d>S&&(d=S),t.x+=t.direction.x*t.speed,t.x<0&&(t.x=0,t.direction={x:0,y:-1},t.targetDirection={x:0,y:-1}),t.x+t.width>e.width&&(t.x=e.width-t.width,t.direction={x:0,y:-1},t.targetDirection={x:0,y:-1}),Math.random()<.02&&b();for(let n=0;n<s.length;n++){const r=s[n];if(r.y+=d,r.y>e.height){s.splice(n,1),n--,h++,E.textContent=h;continue}if(C(t,r)){u=!0,cancelAnimationFrame(v),i.fillStyle="rgba(0, 0, 0, 0.7)",i.fillRect(0,0,e.width,e.height),i.fillStyle="#FFF",i.font="36px Arial",i.textAlign="center",i.fillText("Game Over",e.width/2,e.height/2),i.font="24px Arial",i.fillText(`Score: ${h}`,e.width/2,e.height/2+40),i.font="18px Arial",i.fillText(p?"Tap to restart":"Click to restart",e.width/2,e.height/2+80);const c=()=>{g(),e.removeEventListener("click",c),e.removeEventListener("touchstart",c)};e.addEventListener("click",c),e.addEventListener("touchstart",c);return}}h>0&&h%10===0&&(t.acceleration+=.001,t.inertia=Math.max(.01,t.inertia-.002)),D(),v=requestAnimationFrame(L)}e.addEventListener("click",()=>{a||(a=!0,g())});e.addEventListener("touchstart",n=>{a||(a=!0,g())});P();</script>
    <style rel="stylesheet" crossorigin>body{margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;background-color:#333;overflow:hidden}#game-container{position:relative;width:400px;height:600px;background-color:#fff;overflow:hidden;box-shadow:0 0 10px #00000080;max-width:100%;max-height:100vh}#score{position:absolute;top:10px;right:10px;font-size:24px;font-family:Arial,sans-serif;font-weight:700;color:#333;z-index:10}#game-canvas{width:100%;height:100%;touch-action:none}@media (max-width: 480px){#game-container{width:100%;height:100vh;box-shadow:none}#score{font-size:32px;top:20px;right:20px}}#orientation-message{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000e6;color:#fff;z-index:1000;justify-content:center;align-items:center;text-align:center;font-family:Arial,sans-serif}#orientation-message img{width:80px;height:80px;margin-bottom:20px}#touch-controls{position:absolute;bottom:20px;left:0;width:100%;text-align:center;color:#000000b3;font-family:Arial,sans-serif;font-size:14px;display:none;z-index:10}@media (max-width: 480px){#touch-controls{display:block}}@media (max-width: 480px) and (orientation: landscape){#orientation-message{display:flex}#game-container{display:none}}</style>
  </head>
  <body>
    <div id="game-container">
      <div id="score">0</div>
      <canvas id="game-canvas"></canvas>
      <div id="touch-controls">Swipe left/right to control</div>
    </div>

    <!-- Portrait orientation message -->
    <div id="orientation-message">
      <div>
        <img
          src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0xNiAxSDhDNi4zNSAxIDUgMi4zNSA1IDR2MTZjMCAxLjY1IDEuMzUgMyAzIDNoOGMxLjY1IDAgMy0xLjM1IDMtM1Y0YzAtMS42NS0xLjM1LTMtMy0zem0xIDE4YzAgLjU1LS40NSAxLTEgMUg4Yy0uNTUgMC0xLS40NS0xLTFWNWMwLS41NS40NS0xIDEtMWg4Yy41NSAwIDEgLjQ1IDEgMXYxNHoiLz48cGF0aCBkPSJNMTIgMjJjLjU1IDAgMS0uNDUgMS0xcy0uNDUtMS0xLTEtMSAuNDUtMSAxIC40NSAxIDEgMXoiLz48L3N2Zz4="
          alt="Portrait mode icon"
        />
        <p>Please use portrait orientation</p>
      </div>
    </div>

  </body>
</html>
